<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario y Gesti√≥n de Tareas</title>
</head>
<body>

    <h1 align="center">FORMULARIO</h1>
    <hr>

    <form onsubmit="guardarInfo(); guardarInfos(); return false;">
        <label for="usuario">USUARIO</label>
        <input type="text" id="usuario" name="usuario"><br><br>

        <label for="email">CORREO ELECTRONICO</label>
        <input type="email" id="email" name="email"><br><br>

        <label for="passwd">CONTRASE√ëA</label>
        <input type="password" id="passwd" name="passwd"><br><br>

        <label for="msg">MENSAJE</label><br>
        <textarea id="msg" name="msg" rows="4" cols="50"></textarea><br><br>

        <input type="submit" value="Guardar en LocalStorage y SessionStorage"><br><br>

        <input type="button" onclick="leerInfo()" value="Leer LocalStorage">
        <input type="button" onclick="borrarInfo()" value="Borrar LocalStorage"><br><br>

        <input type="button" onclick="leerInfos()" value="Leer SessionStorage">
        <input type="button" onclick="borrarInfos()" value="Borrar SessionStorage">
    </form>

    <h2>Gesti√≥n de Tareas</h2>

    <label for="tarea">Nueva Tarea:</label>
    <input type="text" id="tarea" name="tarea">
    <button onclick="agregarTarea()">Agregar Tarea</button>

    <h3>Lista de Tareas</h3>
    <ul id="listaTareas"></ul>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            leerInfo();
            mostrarTareas();
        });

        function guardarInfo() {
            const infoUsr = document.getElementById("usuario").value;
            const infoEmail = document.getElementById("email").value;
            const infoPassw = document.getElementById("passwd").value;

            localStorage.setItem("usuario", infoUsr);
            localStorage.setItem("email", infoEmail);
            localStorage.setItem("passwd", infoPassw);
            alert("Datos guardados en LocalStorage");
        }

        function leerInfo() {
            document.getElementById("usuario").value = localStorage.getItem("usuario") || "";
            document.getElementById("email").value = localStorage.getItem("email") || "";
            document.getElementById("passwd").value = localStorage.getItem("passwd") || "";
        }

        function borrarInfo() {
            localStorage.removeItem("usuario");
            localStorage.removeItem("email");
            localStorage.removeItem("passwd");
            document.getElementById("usuario").value = "";
            document.getElementById("email").value = "";
            document.getElementById("passwd").value = "";
            alert("Datos eliminados de LocalStorage");
        }

        function guardarInfos() {
            sessionStorage.setItem("usuario", document.getElementById("usuario").value);
            sessionStorage.setItem("email", document.getElementById("email").value);
            sessionStorage.setItem("passwd", document.getElementById("passwd").value);
            alert("Datos guardados en SessionStorage");
        }

        function leerInfos() {
            document.getElementById("usuario").value = sessionStorage.getItem("usuario") || "";
            document.getElementById("email").value = sessionStorage.getItem("email") || "";
            document.getElementById("passwd").value = sessionStorage.getItem("passwd") || "";
        }

        function borrarInfos() {
            sessionStorage.clear();
            document.getElementById("usuario").value = "";
            document.getElementById("email").value = "";
            document.getElementById("passwd").value = "";
            alert("Datos eliminados de SessionStorage");
        }

        function obtenerTareas() {
            return JSON.parse(localStorage.getItem("tareas")) || [];
        }

        function guardarTareas(tareas) {
            localStorage.setItem("tareas", JSON.stringify(tareas));
        }

        function agregarTarea() {
            const nuevaTareaTexto = document.getElementById("tarea").value.trim();
            if (nuevaTareaTexto === "") {
                alert("Por favor, ingresa una tarea.");
                return;
            }

            let tareas = obtenerTareas();
            const nuevaTarea = { id: Date.now(), texto: nuevaTareaTexto };
            tareas.push(nuevaTarea);

            guardarTareas(tareas);
            document.getElementById("tarea").value = "";
            mostrarTareas();
        }

        function actualizarTarea(id) {
            let tareas = obtenerTareas();
            const tareaIndex = tareas.findIndex(tarea => tarea.id === id);

            if (tareaIndex === -1) {
                alert("No se encontr√≥ la tarea.");
                return;
            }

            const nuevoTexto = prompt("Modifica tu tarea:", tareas[tareaIndex].texto);

            if (nuevoTexto !== null && nuevoTexto.trim() !== "") {
                tareas[tareaIndex].texto = nuevoTexto.trim();
                guardarTareas(tareas);
                mostrarTareas();
            }
        }

        function eliminarTarea(id) {
            let tareas = obtenerTareas();
            tareas = tareas.filter(tarea => tarea.id !== id);

            guardarTareas(tareas);
            mostrarTareas();
        }

        function mostrarTareas() {
            const lista = document.getElementById("listaTareas");
            lista.innerHTML = "";

            let tareas = obtenerTareas();

            tareas.forEach(tarea => {
                const li = document.createElement("li");
                li.innerHTML = `${tarea.texto} 
                    <button onclick="actualizarTarea(${tarea.id})">‚úèÔ∏è</button>
                    <button onclick="eliminarTarea(${tarea.id})">üóëÔ∏è</button>`;
                lista.appendChild(li);
            });
        }
    </script>

</body>
</html>
